(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48f37859"],{"825e":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("h2",{staticStyle:{"text-align":"center"}},[e._v("发布新课程")]),r("el-steps",{staticStyle:{"margin-bottom":"40px"},attrs:{active:e.active,"align-center":"","process-status":"wait"}},[r("el-step",{attrs:{title:"填写课程基本信息"}}),r("el-step",{attrs:{title:"创建大纲"}}),r("el-step",{attrs:{title:"提交审核"}})],1),r("AddCourseInfo",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active===1"}],on:{next:e.next}})],1)},a=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{attrs:{"label-width":"120px"}},[r("el-form-item",{attrs:{label:"课程标题"}},[r("el-input",{attrs:{placeholder:" 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写"},model:{value:e.courseInfo.title,callback:function(t){e.$set(e.courseInfo,"title",t)},expression:"courseInfo.title"}})],1),r("el-form-item",{attrs:{label:"课程分类"}},[r("el-select",{attrs:{clearable:"",placeholder:"一级分类"},on:{change:e.updateTowSubject},model:{value:e.courseInfo.subjectParentId,callback:function(t){e.$set(e.courseInfo,"subjectParentId",t)},expression:"courseInfo.subjectParentId"}},e._l(e.subjectFirstList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1),r("el-select",{attrs:{clearable:"",placeholder:"二级分类"},model:{value:e.courseInfo.subjectId,callback:function(t){e.$set(e.courseInfo,"subjectId",t)},expression:"courseInfo.subjectId"}},e._l(e.subjectTowList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1),r("el-form-item",{attrs:{label:"课程讲师"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.courseInfo.teacherId,callback:function(t){e.$set(e.courseInfo,"teacherId",t)},expression:"courseInfo.teacherId"}},e._l(e.teachers,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),r("el-form-item",{attrs:{label:"总课时"}},[r("el-input-number",{attrs:{min:0,"controls-position":"right",placeholder:"请填写课程的总课时数"},model:{value:e.courseInfo.lessonNum,callback:function(t){e.$set(e.courseInfo,"lessonNum",t)},expression:"courseInfo.lessonNum"}})],1),r("el-form-item",{attrs:{label:"课程简介"}},[r("el-input",{model:{value:e.courseInfo.description,callback:function(t){e.$set(e.courseInfo,"description",t)},expression:"courseInfo.description"}})],1),r("el-form-item",{attrs:{label:"课程封面"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,action:e.BASE_URL+"edu_oss/file_oss/coverUpload"}},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.courseInfo.cover,alt:"课程封面"}})])],1),r("el-form-item",{attrs:{label:"课程价格"}},[r("el-input-number",{attrs:{min:0,"controls-position":"right",placeholder:"免费课程设置为0"},model:{value:e.courseInfo.price,callback:function(t){e.$set(e.courseInfo,"price",t)},expression:"courseInfo.price"}}),e._v(" 元 ")],1),r("el-form-item",[r("el-button",{attrs:{disabled:e.saveBtnDisabled,type:"primary"},on:{click:e.next}},[e._v("保存并下一步")])],1)],1)},c=[],n=(r("4de4"),r("b775")),i={addCourse:function(e){return Object(n["a"])({url:"/eduservice/edu-course/addCourse",method:"post",data:e})}},u=r("e67a"),l=r("f527"),d={name:"AddCourseInfo",data:function(){return{courseInfo:{cover:"",description:"",id:"",lessonNum:0,price:0,subjectParentId:"",subjectId:"",teacherId:"",title:""},teachers:{},saveBtnDisabled:!1,subjectFirstList:[],subjectTowList:[],BASE_URL:"http://liupeikun.xyz/",OSS_PATH:"https://edu-peikun.oss-cn-beijing.aliyuncs.com/"}},methods:{next:function(){i.addCourse(this.courseInfo),this.$emit("next")},updateTowSubject:function(e){this.courseInfo.subjectId="",this.subjectTowList=this.subjectFirstList.filter((function(t){return t.id===e}))[0].children},beforeAvatarUpload:function(e){var t=e.size/1024<50,r="image/jpeg"===e.type;t||this.$message.error("课程封面不能超过500KB！"),r||this.$message.error("图片必须为image/jpeg格式！")},handleAvatarSuccess:function(e){this.courseInfo.cover=e.data.url}},mounted:function(){var e=this;this.courseInfo.cover=this.OSS_PATH+"cover/defultCover.jpg",console.log(this.courseInfo.cover),u["a"].getAllTeacher().then((function(t){e.teachers=t.data.teachers})),l["a"].getSubjectTree().then((function(t){e.subjectFirstList=t.data.subjectList}))}},f=d,h=r("2877"),p=Object(h["a"])(f,o,c,!1,null,"8fa2c8b4",null),b=p.exports,m={name:"AddCourse",components:{AddCourseInfo:b},data:function(){return{active:1}},methods:{next:function(){this.active++>2&&(this.active=1)}}},v=m,I=Object(h["a"])(v,s,a,!1,null,"91f0b87a",null);t["default"]=I.exports},e67a:function(e,t,r){"use strict";r("99af");var s=r("b775");t["a"]={saveTeacherPage:function(e,t,r){return Object(s["a"])({url:"/eduservice/edu-teacher/pageTeacherCondition/".concat(e,"/").concat(t,"/"),method:"get",params:r,data:{name:"张三"}})},deleteTeacherById:function(e){return Object(s["a"])({url:"/eduservice/edu-teacher/deleteTeacherById/".concat(e,"/"),method:"delete"})},addTeacher:function(e){return Object(s["a"])({url:"/eduservice/edu-teacher/addTeacher/",data:e,method:"post"})},editTeacher:function(e){return Object(s["a"])({url:"/eduservice/edu-teacher/updateTeacher/",data:e,method:"post"})},getAllTeacher:function(){return Object(s["a"])({url:"/eduservice/edu-teacher/findAll",method:"get"})}}},f527:function(e,t,r){"use strict";var s=r("b775");t["a"]={getSubjectTree:function(){return Object(s["a"])({url:"/eduservice/edu-subject/getSubjectTree",method:"get"})}}}}]);