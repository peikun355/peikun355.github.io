(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20462ee1"],{"825e":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("h2",{staticStyle:{"text-align":"center"}},[e._v("发布新课程")]),o("el-steps",{staticStyle:{"margin-bottom":"40px"},attrs:{active:e.active,"align-center":"","process-status":"wait"}},[o("el-step",{attrs:{title:"填写课程基本信息"}}),o("el-step",{attrs:{title:"创建大纲"}}),o("el-step",{attrs:{title:"提交审核"}})],1),o("AddCourseInfo",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active===1"}],on:{next:e.next}})],1)},r=[],a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{attrs:{"label-width":"120px"}},[o("el-form-item",{attrs:{label:"课程标题"}},[o("el-input",{attrs:{placeholder:" 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写"},model:{value:e.courseInfo.title,callback:function(t){e.$set(e.courseInfo,"title",t)},expression:"courseInfo.title"}})],1),o("el-form-item",{attrs:{label:"课程分类"}},[o("el-select",{attrs:{clearable:"",placeholder:"一级分类"},on:{change:e.updateTowSubject},model:{value:e.courseInfo.subjectParentId,callback:function(t){e.$set(e.courseInfo,"subjectParentId",t)},expression:"courseInfo.subjectParentId"}},e._l(e.subjectFirstList,(function(e){return o("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1),o("el-select",{attrs:{clearable:"",placeholder:"二级分类"},model:{value:e.courseInfo.subjectId,callback:function(t){e.$set(e.courseInfo,"subjectId",t)},expression:"courseInfo.subjectId"}},e._l(e.subjectTowList,(function(e){return o("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1),o("el-form-item",{attrs:{label:"课程讲师"}},[o("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.courseInfo.teacherId,callback:function(t){e.$set(e.courseInfo,"teacherId",t)},expression:"courseInfo.teacherId"}},e._l(e.teachers,(function(e){return o("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),o("el-form-item",{attrs:{label:"总课时"}},[o("el-input-number",{attrs:{min:0,"controls-position":"right",placeholder:"请填写课程的总课时数"},model:{value:e.courseInfo.lessonNum,callback:function(t){e.$set(e.courseInfo,"lessonNum",t)},expression:"courseInfo.lessonNum"}})],1),o("el-form-item",{attrs:{label:"课程简介"}},[o("el-input",{model:{value:e.courseInfo.description,callback:function(t){e.$set(e.courseInfo,"description",t)},expression:"courseInfo.description"}})],1),o("quill-editor",{ref:"QuillEditor",staticClass:".editor",attrs:{options:e.editorOption},model:{value:e.courseInfo.description,callback:function(t){e.$set(e.courseInfo,"description",t)},expression:"courseInfo.description"}}),o("el-form-item",{attrs:{label:"课程封面"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,action:e.BASE_URL+"edu_oss/file_oss/coverUpload"}},[o("img",{staticStyle:{height:"100px"},attrs:{src:e.courseInfo.cover,alt:"课程封面"}})])],1),o("el-form-item",{attrs:{label:"课程价格"}},[o("el-input-number",{attrs:{min:0,"controls-position":"right",placeholder:"免费课程设置为0"},model:{value:e.courseInfo.price,callback:function(t){e.$set(e.courseInfo,"price",t)},expression:"courseInfo.price"}}),e._v(" 元 ")],1),o("el-form-item",[o("el-button",{attrs:{disabled:e.saveBtnDisabled,type:"primary"},on:{click:e.next}},[e._v("保存并下一步")])],1)],1),o("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"none"},attrs:{"show-file-list":!1,"on-success":e.imgUploadSuccess,action:e.BASE_URL+"edu_oss/file_oss/descriptionImgUpload"}},[o("button",{attrs:{id:"upload"}},[e._v("上传")])])],1)},c=[],n=(o("4de4"),o("b775")),i={addCourse:function(e){return Object(n["a"])({url:"/eduservice/edu-course/addCourse",method:"post",data:e})}},l=o("e67a"),u=o("f527"),d=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video"],["clean"]],f={name:"AddCourseInfo",data:function(){return{BASE_API:"https://119.23.76.73/",content:"",editorOption:{modules:{toolbar:{container:d,handlers:{image:function(e){e?document.getElementById("upload").click():this.quill.format("image",!1)}}}},theme:"snow",placeholder:"请输入正文"},courseInfo:{cover:"",description:"",id:"",lessonNum:0,price:0,subjectParentId:"",subjectId:"",teacherId:"",title:""},teachers:{},saveBtnDisabled:!1,subjectFirstList:[],subjectTowList:[],BASE_URL:"https://119.23.76.73/",OSS_PATH:"https://edu-peikun.oss-cn-beijing.aliyuncs.com/"}},methods:{imgUploadSuccess:function(e){var t=e.data.url,o=this.$refs.QuillEditor.quill,s=o.getSelection().index;o.insertEmbed(s,"image",t),o.setSelection(s+1)},imgUploadError:function(){},next:function(){i.addCourse(this.courseInfo),this.$emit("next")},updateTowSubject:function(e){this.courseInfo.subjectId="",this.subjectTowList=this.subjectFirstList.filter((function(t){return t.id===e}))[0].children},beforeAvatarUpload:function(e){var t=e.size/1024<500,o="image/jpeg"===e.type;if(!t)return this.$message.error("课程封面不能超过500KB！"),!1;o||this.$message.error("图片必须为image/jpeg格式！")},handleAvatarSuccess:function(e){this.courseInfo.cover=e.data.url}},mounted:function(){var e=this;this.courseInfo.cover=this.OSS_PATH+"cover/defultCover.jpg",l["a"].getAllTeacher().then((function(t){e.teachers=t.data.teachers})),u["a"].getSubjectTree().then((function(t){e.subjectFirstList=t.data.subjectList}))}},p=f,h=(o("8dcf"),o("2877")),b=Object(h["a"])(p,a,c,!1,null,null,null),m=b.exports,v={name:"AddCourse",components:{AddCourseInfo:m},data:function(){return{active:1}},methods:{next:function(){this.active++>2&&(this.active=1)}}},I=v,g=Object(h["a"])(I,s,r,!1,null,"91f0b87a",null);t["default"]=g.exports},"8dcf":function(e,t,o){"use strict";o("a405")},a405:function(e,t,o){},e67a:function(e,t,o){"use strict";o("99af");var s=o("b775");t["a"]={saveTeacherPage:function(e,t,o){return Object(s["a"])({url:"/eduservice/edu-teacher/pageTeacherCondition/".concat(e,"/").concat(t,"/"),method:"get",params:o,data:{name:"张三"}})},deleteTeacherById:function(e){return Object(s["a"])({url:"/eduservice/edu-teacher/deleteTeacherById/".concat(e,"/"),method:"delete"})},addTeacher:function(e){return Object(s["a"])({url:"/eduservice/edu-teacher/addTeacher/",data:e,method:"post"})},editTeacher:function(e){return Object(s["a"])({url:"/eduservice/edu-teacher/updateTeacher/",data:e,method:"post"})},getAllTeacher:function(){return Object(s["a"])({url:"/eduservice/edu-teacher/findAll",method:"get"})}}},f527:function(e,t,o){"use strict";var s=o("b775");t["a"]={getSubjectTree:function(){return Object(s["a"])({url:"/eduservice/edu-subject/getSubjectTree",method:"get"})}}}}]);